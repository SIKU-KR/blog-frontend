# 블로그 백엔드 API 구현 적용 계획

## 개요
이 문서는 이미 구현된 API 클라이언트(`app/lib/api.ts`)를 Next.js 애플리케이션에 실제로 적용하기 위한 상세 계획을 담고 있습니다. 각 페이지와 컴포넌트별로 필요한 구현 사항과 데이터 흐름을 정의합니다.

---

## 1. 블로그 메인 페이지 (`app/blog/page.tsx`) 구현

### 1.1 서버 컴포넌트 구현
- [x] `getServerSideProps` 대신 서버 컴포넌트 패턴 적용
  ```typescript
  // 예시 코드
  async function fetchPosts(page: number = 1, category?: string) {
    "use server";
    const data = await api.posts.getPosts(page, 10, category);
    return data;
  }
  ```

### 1.2 포스트 목록 페이지 구현
- [x] 포스트 목록 페이지 (`app/blog/page.tsx`) 수정
  - [x] URL 쿼리 파라미터에서 페이지와 카테고리 값 추출
  - [x] API 호출하여 포스트 목록 데이터 가져오기
  - [x] 로딩 상태 UI 구현
  - [x] 오류 처리 UI 구현
  - [x] 포스트 목록 렌더링
    - [x] 각 포스트 카드 컴포넌트 구현
    - [x] 카드에 제목, 요약, 카테고리, 날짜 표시

### 1.3 페이지네이션 구현
- [x] 페이지네이션 컴포넌트 (`app/components/Pagination.tsx`) 생성
  - [x] 현재 페이지, 전체 페이지, 페이지 이동 함수 props 설정
  - [x] 페이지 번호 표시 및 이전/다음 버튼 구현
  - [x] 활성 페이지 스타일링

### 1.4 카테고리 필터링 구현
- [x] 사이드바 카테고리 컴포넌트 (`app/components/CategorySidebar.tsx`) 생성
  - [x] 서버에서 모든 카테고리 데이터 가져오기
  - [x] 카테고리 목록 렌더링
  - [x] 현재 선택된 카테고리 하이라이트 처리
  - [x] 카테고리 클릭 시 해당 카테고리로 필터링된 URL로 이동
  - [x] 각 카테고리별 게시물 수 표시
  - [x] 모바일 반응형 처리

---

## 2. 블로그 상세 페이지 (`app/posts/[postId]/page.tsx`) 구현

### 2.1 서버 컴포넌트 구현
- [x] 동적 경로 매개변수에서 `postId` 추출하여 API 호출

### 2.2 게시물 상세 페이지 구현
- [x] 게시물 상세 페이지 (`app/posts/[postId]/page.tsx`) 생성
  - [x] API에서 게시물 상세 정보 가져오기
  - [x] 게시물 제목, 내용, 카테고리, 날짜 표시
  - [x] Markdown 또는 HTML 렌더링 처리
  - [x] 이전/다음 게시물 링크 (선택 사항)

### 2.3 댓글 섹션 구현
- [x] 댓글 컴포넌트 (`app/components/Comments.tsx`) 생성
  - [x] 클라이언트 컴포넌트로 설정 (`"use client"`)
  - [x] `useEffect`를 사용해 컴포넌트 마운트 시 댓글 목록 가져오기
  - [x] 댓글 목록 렌더링
  - [x] 댓글 작성 폼 구현
    - [x] 이름, 내용 입력 필드
    - [x] 유효성 검사
    - [x] 댓글 제출 기능

---

## 3. 관리자 기능 구현

### 3.1 관리자 로그인 페이지
- [ ] 관리자 로그인 페이지 (`app/admin/page.tsx`) 생성
  - [ ] 클라이언트 컴포넌트로 설정 (`"use client"`)
  - [ ] 로그인 폼 구현
  - [ ] API를 통한 로그인 처리
  - [ ] 로그인 상태 저장 (쿠키 또는 세션)
  - [ ] 로그인 상태에 따라 관리자 메인 페이지로 리다이렉트

### 3.2 관리자 인증 상태 관리
- [ ] 인증 관리를 위한 Context API 구현 (`app/contexts/AuthContext.tsx`)
  - [ ] `AuthProvider` 컴포넌트 생성
  - [ ] `useAuth` 훅 구현
  - [ ] 로그인 상태 확인 및 유지 로직 추가

### 3.3 관리자 레이아웃 및 보호된 라우트
- [ ] 관리자 레이아웃 (`app/admin/layout.tsx`) 생성
  - [ ] 관리자 메뉴 사이드바 구현
  - [ ] 인증되지 않은 사용자 접근 제한
  - [ ] 관리자 헤더 컴포넌트 구현

### 3.4 게시물 관리 페이지
- [ ] 게시물 관리 페이지 (`app/admin/posts/page.tsx`) 생성
  - [ ] 게시물 목록 테이블 구현
  - [ ] 게시물 생성, 수정, 삭제 버튼
  - [ ] 페이지네이션 및 검색 기능

### 3.5 게시물 편집 페이지
- [ ] 게시물 편집 페이지 (`app/admin/posts/[id]/edit/page.tsx`) 생성
  - [ ] 기존 게시물 데이터 로드
  - [ ] 편집 폼 구현
  - [ ] API를 통한 수정 처리
  - [ ] 성공/실패 피드백 UI

### 3.6 새 게시물 작성 페이지
- [ ] 새 게시물 작성 페이지 (`app/admin/posts/new/page.tsx`) 생성
  - [ ] 작성 폼 구현
  - [ ] API를 통한 게시물 생성 처리
  - [ ] 성공 시 상세 페이지로 리다이렉트

### 3.7 카테고리 관리 페이지
- [ ] 카테고리 관리 페이지 (`app/admin/categories/page.tsx`) 생성
  - [ ] 카테고리 목록 표시
  - [ ] 카테고리 추가 기능
  - [ ] 카테고리 순서 변경 기능 (drag-and-drop)
  - [ ] API를 통한 카테고리 변경 처리

---

## 4. 공통 컴포넌트 및 유틸리티 구현

### 4.1 로딩 및 에러 상태 컴포넌트
- [x] 로딩 컴포넌트 (`app/components/Loading.tsx`) 생성
- [x] 에러 메시지 컴포넌트 (`app/components/ErrorMessage.tsx`) 생성
- [ ] 알림 토스트 컴포넌트 (`app/components/Toast.tsx`) 생성

### 4.2 폼 컴포넌트
- [ ] 입력 필드 컴포넌트 (`app/components/InputField.tsx`) 생성
- [ ] 텍스트 에어리어 컴포넌트 (`app/components/TextArea.tsx`) 생성
- [ ] 버튼 컴포넌트 (`app/components/Button.tsx`) 생성
- [ ] 폼 유효성 검사 훅 (`app/hooks/useFormValidation.tsx`) 생성

### 4.3 데이터 페칭 훅
- [ ] 데이터 페칭을 위한 커스텀 훅 구현 (`app/hooks/useFetch.tsx`)
  - [ ] 로딩 상태 관리
  - [ ] 에러 처리
  - [ ] 데이터 캐싱
  - [ ] 재시도 로직

---

## 5. SEO 및 메타데이터 최적화

### 5.1 기본 메타데이터 설정
- [ ] `app/layout.tsx`에서 기본 메타데이터 설정
  - [ ] 사이트 제목, 설명, 키워드 등

### 5.2 페이지별 메타데이터
- [ ] 블로그 메인 페이지 메타데이터
- [ ] 게시물 상세 페이지 동적 메타데이터
  - [ ] 게시물 제목, 요약 활용

### 5.3 OG 이미지 생성
- [ ] 동적 OG 이미지 생성 구현
  - [ ] 게시물 제목, 카테고리 포함 이미지 생성

---

## 6. 테스트 및 배포 준비

### 6.1 단위 테스트
- [ ] API 클라이언트 테스트
- [ ] 주요 컴포넌트 테스트

### 6.2 통합 테스트
- [ ] 페이지 간 이동 테스트
- [ ] 데이터 페칭 테스트

### 6.3 배포 환경 설정
- [ ] 개발/프로덕션 환경 API URL 분리
  ```
  # .env.development
  NEXT_PUBLIC_API_URL=http://localhost:8080
  
  # .env.production
  NEXT_PUBLIC_API_URL=https://api.your-blog-domain.com
  ```

### 6.4 성능 최적화
- [ ] 이미지 최적화
- [ ] 코드 스플리팅
- [ ] 캐싱 전략

---

## 우선순위 및 구현 순서

1. **기본 데이터 표시 (높은 우선순위)**
   - 블로그 메인 페이지 및 게시물 목록
   - 게시물 상세 페이지
   - 카테고리 필터링

2. **사용자 상호작용 (중간 우선순위)**
   - 댓글 기능
   - 페이지네이션
   - 공통 컴포넌트

3. **관리자 기능 (중간 우선순위)**
   - 관리자 로그인
   - 게시물 관리

4. **최적화 및 향상된 기능 (낮은 우선순위)**
   - SEO 최적화
   - 성능 최적화
   - 테스트

---

## 참고 사항

- Next.js 13+ 앱 라우터 패턴을 활용하여 구현
- TypeScript 타입 안전성 유지
- 컴포넌트의 재사용성 및 확장성 고려
- 서버 컴포넌트와 클라이언트 컴포넌트의 적절한 분리
- 사용자 경험(UX) 최적화 (로딩 상태, 오류 처리 등) 